# LuatOS 项目构成介绍

## 项目概述

LuatOS是基于强大的Lua引擎架构设计的嵌入式操作系统，采用Lua脚本开发，能够快速实现业务逻辑。现已支持74个核心库，55个扩展库，1000余个API，100多个基于场景的demo，让开发智能设备像做PPT一样轻松。

## 项目目录结构

### 1. 核心组件

#### 📁 lua/ - Lua虚拟机源码
- **作用**: 提供Lua 5.3.5虚拟机的完整实现
- **内容**: 
  - `include/` - Lua虚拟机头文件（30个文件）
  - `src/` - Lua虚拟机C源码实现（38个文件）
- **特点**: 基于原版Lua 5.3.5，包含官方修正和合宙优化

#### 📁 luat/ - LuatOS核心框架
- **作用**: LuatOS的核心框架代码，连接Lua虚拟机与硬件抽象层
- **主要目录**:
  - `include/` - 核心头文件（54个），定义各种硬件接口
  - `modules/` - Lua库的C实现（44个模块）
  - `vfs/` - 虚拟文件系统（16个文件）
  - `demo/` - 演示代码（131个目录）
  - `freertos/` - FreeRTOS适配层
  - `cmsis_os2/` - CMSIS-OS2适配层
  - `weak/` - 弱符号实现（10个文件）

#### 📁 components/ - 组件库
- **作用**: LuatOS在Lua基础上扩展的一系列功能组件
- **主要组件**:
  - **通信协议**: `network/`, `bluetooth/`, `mobile/`, `ethernet/`
  - **图形界面**: `lvgl/`, `lvgl8/`, `lcd/`, `u8g2/`
  - **文件系统**: `fatfs/`, `lfs/`, `flashdb/`, `fal/`
  - **加密安全**: `mbedtls/`, `crypto/`, `gmssl/`
  - **多媒体**: `multimedia/`, `camera/`, `tjpgd/`
  - **传感器**: `max30102/`, `mlx90640-library/`
  - **外设驱动**: `spi/`, `i2c/`, `uart/`, `gpio/`
  - **实时系统**: `freertos/`, `rtos/`
  - **工具库**: `cjson/`, `zlib/`, `miniz/`, `qrcode/`

### 2. 模组支持

#### 📁 module/ - 硬件模组支持
- **作用**: 为合宙主推模组提供固件、demo和完整方案
- **支持型号**:
  - **Air780E系列**: Air780EPM, Air780EHM, Air780EHV, Air780EGH
  - **Air8000系列**: Air8000, Air8000A, Air8000W, Air8000T, Air8000G, Air8000D
  - **Air8101系列**: Air8101, Air8101A
  - **PC模拟器**: 无需开发板的模拟环境
- **每个模组包含**:
  - `core/` - LuatOS内核固件(.soc)下载地址
  - `demo/` - 通用演示代码(.lua)
  - `project/` - 完整解决方案代码

### 3. 脚本库

#### 📁 script/ - LuatOS脚本库
- **作用**: 提供外部库合集和核心库
- **主要目录**:
  - **libs/** - 外设驱动库（64个文件）
    - 传感器驱动: `aht10.lua`, `bh1750.lua`, `mpu6xxx.lua`
    - 通信模块: `modbus_rtu.lua`, `rc522.lua`, `mcp2515.lua`
    - 显示控制: `tm1637.lua`, `tm1640.lua`, `tm1650.lua`
    - 网络服务: `httpplus.lua`, `libnet.lua`, `dhcpsrv.lua`
    - 云平台: `aliyun.lua`, `onenetcoap.lua`, `openai.lua`
  - **corelib/** - 系统核心库（已内置在固件内）
  - **turnkey/** - 准项目级方案（真实项目演示）

### 4. 开发工具

#### 📁 tools/ - 辅助工具
- **作用**: 提供开发和文档生成工具
- **主要工具**:
  - `api_get.py` - API接口提取工具（8.2KB, 226行）
  - `documentGenerator.py` - 文档生成器（25KB, 67行）
  - `make_doc_file.py` - 文档文件生成工具（6.7KB, 181行）
  - `ciNotify.py` - CI通知工具（2.2KB, 62行）
  - `sys_pub.py` - 系统发布工具（5.2KB, 174行）
  - `luadb/` - Lua调试工具

## 技术架构

### 分层架构
```
┌─────────────────────────────────────┐
│           应用层 (Lua脚本)           │
├─────────────────────────────────────┤
│         LuatOS框架 (luat/)          │
├─────────────────────────────────────┤
│       组件库 (components/)          │
├─────────────────────────────────────┤
│      Lua虚拟机 (lua/)              │
├─────────────────────────────────────┤
│        硬件抽象层 (BSP)             │
└─────────────────────────────────────┘
```

### 核心特性

1. **多平台支持**: 支持多种合宙模组和PC模拟器
2. **丰富的组件**: 74个核心库 + 55个扩展库
3. **完整的生态**: 从底层驱动到上层应用的完整解决方案
4. **易于开发**: Lua脚本开发，降低嵌入式开发门槛
5. **实时系统**: 基于FreeRTOS的实时任务调度
6. **标准化**: 提供标准化的外设驱动和API接口

## 开发流程

1. **环境准备**: 选择支持的开发板或使用PC模拟器
2. **固件烧录**: 使用Luatools工具烧录对应模组的固件
3. **脚本开发**: 使用Lua编写业务逻辑
4. **库调用**: 调用核心库和扩展库实现功能
5. **调试测试**: 使用调试工具进行测试和优化
6. **部署发布**: 将完成的方案部署到目标设备

## 授权协议

LuatOS采用MIT License开源协议，允许自由使用、修改和分发。

---

*本文档基于LuatOS项目结构分析生成，详细信息请参考各目录下的具体文档。* 